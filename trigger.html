<script>
const WS_URL = "https://websocket-server-np3m.onrender.com/";
let ws = null;

function connectWebSocket() {
    ws = new WebSocket(WS_URL);

    ws.onopen = () => console.log("Trigger connected");

    ws.onclose = () => {
        console.log("Trigger disconnected, retrying in 2s...");
        setTimeout(connectWebSocket, 500); // reconnect
    };

    ws.onerror = (err) => {
        console.error("WebSocket error:", err);
        ws.close();
    };
}

connectWebSocket();

// Όταν πατάς το κουμπί
function sendAlert() {
    if (ws && ws.readyState === WebSocket.OPEN) {
        ws.send("ALERT");
    } else {
        console.log("WebSocket not connected, alert not sent");
    }
}
</script>
